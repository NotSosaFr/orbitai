
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OrbitAI - Your Personal Coding Assistant</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <style>
    :root { --bg:#0d1117; --s:#161b22; --t:#e6edf3; --ts:#8b949e; --b:#30363d; --p:#58a6ff; --ph:#1f6feb; }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:system-ui,sans-serif;background:var(--bg);color:var(--t);height:100vh;display:flex;flex-direction:column;}
    header{background:var(--s);border-bottom:1px solid var(--b);padding:1rem;text-align:center;}
    .logo{font-size:1.9rem;font-weight:900;background:linear-gradient(90deg,#58a6ff,#8b3fff);-webkit-background-clip:text;background-clip:text;color:transparent;}
    main{flex:1;overflow-y:auto;padding:1.5rem;max-width:960px;margin:0 auto;width:100%;}
    .message{margin-bottom:1.5rem;display:flex;gap:12px;}
    .user{justify-content:flex-end;}
    .ai{justify-content:flex-start;}
    .bubble{max-width:80%;padding:14px 18px;border-radius:18px;line-height:1.6;position:relative;}
    .user .bubble{background:var(--p);color:white;border-bottom-right-radius:4px;}
    .ai .bubble{background:var(--s);border:1px solid var(--b);border-bottom-left-radius:4px;}
    pre{background:#000 !important;padding:16px !important;border-radius:12px !important;position:relative;margin:12px 0 !important;}
    .copy-btn{position:absolute;top:8px;right:8px;background:rgba(255,255,255,0.1);color:#8b949e;border:none;padding:5px 10px;border-radius:6px;cursor:pointer;font-size:12px;}
    .copy-btn:hover{background:rgba(255,255,255,0.2);color:white;}
    footer{padding:1rem;background:var(--s);border-top:1px solid var(--b);}
    .input-area{max-width:960px;margin:0 auto;display:flex;gap:12px;align-items:end;}
    textarea{flex:1;background:var(--bg);border:1px solid var(--b);color:var(--t);padding:14px 16px;border-radius:12px;resize:none;font-size:1rem;min-height:56px;max-height:200px;}
    textarea:focus{outline:none;border-color:var(--p);}
    button{background:var(--p);color:white;border:none;width:48px;height:48px;border-radius:12px;cursor:pointer;font-size:20px;}
    button:hover{background:var(--ph);}
    button:disabled{opacity:0.5;}
    .typing::after{content:'';animation:dots 1.5s infinite;}
    @keyframes dots{0%,20%{content:'';}40%{content:'.';}60%{content:'..';}80%,100%{content:'...';}}
  </style>
</head>
<body>
  <header>
    <div class="logo">OrbitAI</div>
    <div style="font-size:0.9rem;color:var(--ts);margin-top:4px;">Your Personal Coding Assistant</div>
  </header>

  <main id="chat">
    <div class="message ai"><div class="bubble">
      Hey! I'm <strong>OrbitAI</strong> — your dedicated coding assistant.<br><br>
      I can write, debug, explain, and optimize code in any language.<br><br>
      Just ask — I'm ready!
    </div></div>
  </main>

  <footer>
    <div class="input-area">
      <textarea id="input" placeholder="Ask me anything about code…" rows="1"></textarea>
      <button id="send">Send</button>
    </div>
  </footer>

<script>
  const chat = document.getElementById('chat');
  const input = document.getElementById('input');
  const sendBtn = document.getElementById('send');

  // Your key is already inside — no traces of any provider
  const API_KEY = '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';

  input.addEventListener('input',()=>{input.style.height='auto';input.style.height=input.scrollHeight+'px';});

  function getHistory(){
    return Array.from(document.querySelectorAll('.message')).map(m=>({
      role: m.classList.contains('user')?'user':'assistant',
      content: m.querySelector('.bubble').innerText.trim()
    })).filter(x=>x.content);
  }

  async function sendMessage(){
    let text = input.value.trim();
    if(!text) return;

    const userMsg = document.createElement('div');
    userMsg.className = 'message user';
    userMsg.innerHTML = `<div class="bubble">${marked.parse(text)}</div>`;
    chat.appendChild(userMsg);

    input.value=''; input.style.height='auto';

    const aiMsg = document.createElement('div');
    aiMsg.className = 'message ai';
    aiMsg.innerHTML = `<div class="bubble"><span class="typing">Thinking</span></div>`;
    chat.appendChild(aiMsg);
    chat.scrollTop = chat.scrollHeight;

    sendBtn.disabled = true;

    try{
      const response = await fetch('https://api.groq.com/openai/v1/chat/completions',{
        method:'POST',
        headers:{
          'Authorization':`Bearer ${API_KEY}`,
          'Content-Type':'application/json'
        },
        body:JSON.stringify({
          model:"llama-3.1-8b-instant",
          messages:[
            {role:"system",content:"You are OrbitAI, an elite coding assistant. Always provide clean, accurate code with clear explanations."},
            ...getHistory(),
            {role:"user",content:text}
          ],
          temperature:0.6,
          max_tokens:4096
        })
      });

      if(!response.ok){
        const err = await response.json().catch(()=>({}));
        throw new Error(`Error \( {response.status}: \){err.error?.message || 'Request failed'}`);
      }

      const data = await response.json();
      const reply = data.choices[0].message.content;

      aiMsg.querySelector('.bubble').innerHTML = marked.parse(reply);

      document.querySelectorAll('pre').forEach(b=>{
        if(!b.querySelector('.copy-btn')){
          const btn = document.createElement('button');
          btn.className='copy-btn';
          btn.textContent='Copy';
          btn.onclick=()=>{navigator.clipboard.writeText(b.querySelector('code')?.textContent||''); btn.textContent='Copied!'; setTimeout(()=>btn.textContent='Copy',2000);};
          b.appendChild(btn);
        }
      });
      Prism.highlightAll();

    }catch(e){
      aiMsg.querySelector('.bubble').innerHTML = `<strong>Error:</strong> ${e.message}`;
      console.error(e);
    }finally{
      sendBtn.disabled=false;
      chat.scrollTop = chat.scrollHeight;
    }
  }

  input.addEventListener('keydown',e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}});
  sendBtn.addEventListener('click',sendMessage);
</script>
</body>
</html>
